angular.module("hwApp").controller("homeCtrl",function(n,t,i,r,u,f,e){var o,s;n.date={};n.weather={};n.currentConditions={};n.astronomy={};n.compass="";n.search="";n.isoKeys=[];n.tripDate="";n.tripTitle="";n.user=f.user;n.loading=!0;o="https://dl.dropboxusercontent.com/u/137415965/20140211111505-03158-map.kmz?rand="+(new Date).valueOf();s="http://radar.weather.gov/ridge/kml/animation/NCR/LZK_NCR_loop.kml?rand="+(new Date).valueOf();n.kmlLayerOptions={url:o};n.kmlRadarLayerOptions={url:s};n.weatherOptions={temperatureUnits:google.maps.weather.TemperatureUnit.FAHRENHEIT};n.mapOptions={mapTypeId:google.maps.MapTypeId.SATELLITE};n.map={center:{latitude:n.user.locationInfo.lat,longitude:n.user.locationInfo.lon},zoom:10,showWeather:!1,showTraffic:!1,showCloud:!1,showKml:!0,showRadarKml:!1,markers:[{icon:"images/hiking.png",latitude:n.user.locationInfo.lat,longitude:n.user.locationInfo.lon,showWindow:!0,title:n.user.tripTitle}]};n.pulledFromCache=!1;var c=function(){var i,t,u;n.riverMapUrl="http://waterdata.usgs.gov/nwisweb/graph?agency_cd=USGS&site_no="+n.user.usgsStation+"&parm_cd=00065&period=7";i=new Date(n.user.tripDate);n.tripDate=i.getTime();n.now=new Date;t="";u="";u=e.get(config.CacheTypes.CacheLastUpdate);t=n.user.location;t?(n.search=t,l()):r.path("/settings");n.isoKeys=e.keys()},l=function(){u.getWeatherCurrentConditions(n.search).then(function(t){n.currentConditions=t;n.compass=t.wind_dir.toLowerCase();e.add(config.CacheTypes.CurrentConditions,t)});u.getWeather10DayForecast(n.search).then(function(t){n.weather.forecast=t;e.add(config.CacheTypes.TenDayForecast,t)});u.getAstronomy(n.search).then(function(t){n.astronomy=t;e.add(config.CacheTypes.Astronomy,t);n.loading=!1});e.add(config.CacheTypes.CacheLastUpdate,new Date)},h=function(){n.date.tz=new Date((new Date).toLocaleString("en-US",{timeZone:n.user.timezone}));t(h,1e3)};c();h()});
/*
//# sourceMappingURL=homeCtrl.min.js.map
*/