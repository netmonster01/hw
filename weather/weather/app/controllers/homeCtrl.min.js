angular.module("hwApp").controller("homeCtrl",function(n,t,i,r,u,f,e){var o;n.date={};n.weather={};n.currentConditions={};n.astronomy={};n.compass="";n.search="";n.isoKeys=[];n.tripDate="";n.tripTitle="";n.user=f.user;o="http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml";n.kmlLayerOptions={url:o};n.map={center:{latitude:41.875696,longitude:-87.624207},zoom:10,showWeather:!1,showTraffic:!1,showCloud:!1,showKml:!1};n.pulledFromCache=!1;var h=function(){var i,t,u;n.riverMapUrl="http://waterdata.usgs.gov/nwisweb/graph?agency_cd=USGS&site_no="+n.user.usgsStation+"&parm_cd=00065&period=7";i=new Date(n.user.tripDate);n.tripDate=i.getTime();n.now=new Date;t="";u="";u=e.get(config.CacheTypes.CacheLastUpdate);t=n.user.location;t?(n.search=t,c()):r.path("/settings");n.isoKeys=e.keys()},c=function(){u.getWeatherCurrentConditions(n.search).then(function(t){n.currentConditions=t;n.compass=t.wind_dir.toLowerCase();e.add(config.CacheTypes.CurrentConditions,t)});u.getWeather10DayForecast(n.search).then(function(t){n.weather.forecast=t;e.add(config.CacheTypes.TenDayForecast,t)});u.getAstronomy(n.search).then(function(t){n.astronomy=t;e.add(config.CacheTypes.Astronomy,t)});e.add(config.CacheTypes.CacheLastUpdate,new Date)},s=function(){n.date.tz=new Date((new Date).toLocaleString("en-US",{timeZone:n.user.timezone}));t(s,1e3)};h();s()});
/*
//# sourceMappingURL=homeCtrl.min.js.map
*/